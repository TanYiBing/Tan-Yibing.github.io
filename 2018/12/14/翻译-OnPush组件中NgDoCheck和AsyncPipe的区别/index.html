<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ« | Ice Panpan&#39;s blog | Tan Yibing&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Angular">
    <meta name="description" content="[ç¿»è¯‘] OnPush ç»„ä»¶ä¸­ NgDoCheck å’Œ AsyncPipe çš„åŒºåˆ« åŸæ–‡ï¼šThe difference between NgDoCheck and AsyncPipe in OnPush componentsä½œè€…ï¼šMax KoretskyiåŸæŠ€æœ¯åšæ–‡ç”± Max Koretskyi æ’°å†™å‘å¸ƒï¼Œä»–ç›®å‰äº ag-Grid æ‹…ä»»å¼€å‘è€…èŒä½   è¯‘è€…ï¼šIce Panpan">
<meta name="keywords" content="Angular">
<meta property="og:type" content="article">
<meta property="og:title" content="[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«">
<meta property="og:url" content="http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/index.html">
<meta property="og:site_name" content="Ice Panpan&#39;s blog">
<meta property="og:description" content="[ç¿»è¯‘] OnPush ç»„ä»¶ä¸­ NgDoCheck å’Œ AsyncPipe çš„åŒºåˆ« åŸæ–‡ï¼šThe difference between NgDoCheck and AsyncPipe in OnPush componentsä½œè€…ï¼šMax KoretskyiåŸæŠ€æœ¯åšæ–‡ç”± Max Koretskyi æ’°å†™å‘å¸ƒï¼Œä»–ç›®å‰äº ag-Grid æ‹…ä»»å¼€å‘è€…èŒä½   è¯‘è€…ï¼šIce Panpan">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://tanyibing.com/img/rxjs/1.jpeg">
<meta property="og:updated_time" content="2018-12-14T14:02:36.941Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«">
<meta name="twitter:description" content="[ç¿»è¯‘] OnPush ç»„ä»¶ä¸­ NgDoCheck å’Œ AsyncPipe çš„åŒºåˆ« åŸæ–‡ï¼šThe difference between NgDoCheck and AsyncPipe in OnPush componentsä½œè€…ï¼šMax KoretskyiåŸæŠ€æœ¯åšæ–‡ç”± Max Koretskyi æ’°å†™å‘å¸ƒï¼Œä»–ç›®å‰äº ag-Grid æ‹…ä»»å¼€å‘è€…èŒä½   è¯‘è€…ï¼šIce Panpan">
<meta name="twitter:image" content="http://tanyibing.com/img/rxjs/1.jpeg">
    
        <link rel="alternate" type="application/atom+xml" title="Ice Panpan&#39;s blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/avatar_before.jpg">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Ice Panpan(Tan Yibing)</h5>
          <a href="mailto:tanyibing1995@gmail.com" title="tanyibing1995@gmail.com" class="mail">tanyibing1995@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                ä¸»é¡µ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                å½’æ¡£
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ ‡ç­¾
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                åˆ†ç±»
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/TanYiBing" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://weibo.com/u/5341296740?refer_flag=1005055010_" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/friendLink"  >
                <i class="icon icon-lg icon-users"></i>
                å‹é“¾
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
        
            <a id="header-high" style="text-decoration: none; margin-left:12px; width:71px; margin-right:5px" class="header-icon waves-effect waves-circle waves-light" onclick="javascript:(    /*     * Copyright (C) 2015 Rocko (rocko.xyz) <rocko.zxp@gmail.com>     *     * Licensed under the Apache License, Version 2.0 (the 'License');     * you may not use this file except in compliance with the License.     * You may obtain a copy of the License at     *     *      http://www.apache.org/licenses/LICENSE-2.0     *     * Unless required by applicable law or agreed to in writing, software     * distributed under the License is distributed on an 'AS IS' BASIS,     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.     * See the License for the specific language governing permissions and     * limitations under the License.     */    function go() {        function c() {        var e = document.createElement('link');        e.setAttribute('type', 'text/css');        e.setAttribute('rel', 'stylesheet');        e.setAttribute('href', f);        e.setAttribute('class', l);        document.body.appendChild(e)    }     function h() {        var e = document.getElementsByClassName(l);        for (var t = 0; t < e.length; t++) {            document.body.removeChild(e[t])        }    }     function p() {        var e = document.createElement('div');        e.setAttribute('class', a);        document.body.appendChild(e);        setTimeout(function() {            document.body.removeChild(e)        }, 100)    }     function d(e) {        return {            height : e.offsetHeight,            width : e.offsetWidth        }    }     function v(i) {        var s = d(i);        return s.height > e &amp;&amp; s.height < n &amp;&amp; s.width > t &amp;&amp; s.width < r    }     function m(e) {        var t = e;        var n = 0;        while (!!t) {            n += t.offsetTop;            t = t.offsetParent        }        return n    }     function g() {        var e = document.documentElement;        if (!!window.innerWidth) {            return window.innerHeight        } else if (e &amp;&amp; !isNaN(e.clientHeight)) {            return e.clientHeight        }        return 0    }     function y() {        if (window.pageYOffset) {            return window.pageYOffset        }        return Math.max(document.documentElement.scrollTop, document.body.scrollTop)    }     function E(e) {        var t = m(e);        return t >= w &amp;&amp; t <= b + w    }     var songs = [               'http://rocko-blog.qiniudn.com/Music-Wake-Live.mp3' ,     'http://rocko-blog.qiniudn.com/Music-Fashion_Show.mp3'           ,                'http://rocko-blog.qiniudn.com/Music-outside.mp3',                'http://rocko-blog.qiniudn.com/Music-sunburst.mp3'    ];    function S() {        var e = document.getElementById('audio_element_id');        if(e != null){            var index = parseInt(e.getAttribute('curSongIndex'));            if(index > songs.length - 2) {                index = 0;            } else {                index++;            }            e.setAttribute('curSongIndex', index);            N();        }        e.src = i;        e.play()    }     function x(e) {        e.className += ' ' + s + ' ' + o    }     function T(e) {        e.className += ' ' + s + ' ' + u[Math.floor(Math.random() * u.length)]    }     function N() {        var e = document.getElementsByClassName(s);        var t = new RegExp('\\b' + s + '\\b');        for (var n = 0; n < e.length; ) {            e[n].className = e[n].className.replace(t, '')        }    }    function initAudioEle() {        var e = document.getElementById('audio_element_id');        if(e === null){            e = document.createElement('audio');            e.setAttribute('class', l);            e.setAttribute('curSongIndex', 0);            e.id = 'audio_element_id';            e.loop = false;            e.bgcolor = 0;            e.addEventListener('canplay', function() {            setTimeout(function() {                x(k)            }, 500);            setTimeout(function() {                N();                p();                for (var e = 0; e < O.length; e++) {                    T(O[e])                }            }, 15500)        }, true);        e.addEventListener('ended', function() {            N();            h();            go();        }, true);        e.innerHTML = ' <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>';        document.body.appendChild(e);        }    }        initAudioEle();    var e = 30;    var t = 30;    var n = 350;    var r = 350;    var curSongIndex = parseInt(document.getElementById('audio_element_id').getAttribute('curSongIndex'));    var i = songs[curSongIndex];        var s = 'mw-harlem_shake_me';    var o = 'im_first';    var u = ['im_drunk', 'im_baked', 'im_trippin', 'im_blown'];    var a = 'mw-strobe_light';    var f = 'https://rocko.xyz/css/harlem-shake-style.css';        var l = 'mw_added_css';    var b = g();    var w = y();    var C = document.getElementsByTagName('*');    var k = null;    for (var L = 0; L < C.length; L++) {        var A = C[L];        if (v(A)) {            if (E(A)) {                k = A;                break            }        }    }    if (A === null) {        console.warn('Could not find a node of the right size. Please try a different page.');        return    }    c();    S();    var O = [];    for (var L = 0; L < C.length; L++) {        var A = C[L];        if (v(A)) {            O.push(A)        }    }    })()">
        <i class="icon icon-lg icon-music"></i> High~
        </a>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-12-14T13:59:55.000Z" itemprop="datePublished" class="page-time">
  2018-12-14
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Angular/">Angular</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ç¿»è¯‘-OnPush-ç»„ä»¶ä¸­-NgDoCheck-å’Œ-AsyncPipe-çš„åŒºåˆ«"><span class="post-toc-number">1.</span> <span class="post-toc-text">[ç¿»è¯‘] OnPush ç»„ä»¶ä¸­ NgDoCheck å’Œ AsyncPipe çš„åŒºåˆ«</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#OnPush-ç»„ä»¶"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">OnPush ç»„ä»¶</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ‰‹åŠ¨è§¦å‘å˜æ›´æ£€æµ‹"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">æ‰‹åŠ¨è§¦å‘å˜æ›´æ£€æµ‹</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#è¾“å…¥ç»‘å®š"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">è¾“å…¥ç»‘å®š</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å¼‚æ­¥æ›´æ–°"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">å¼‚æ­¥æ›´æ–°</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#AsyncPipe"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">AsyncPipe</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ‰‹åŠ¨æ£€æŸ¥å¹¶ä¸”å˜æ›´æ£€æµ‹"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">æ‰‹åŠ¨æ£€æŸ¥å¹¶ä¸”å˜æ›´æ£€æµ‹</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#é‚£ä¹ˆé‚£ç§è§£å†³æ–¹æ¡ˆæ›´å¿«ï¼Ÿ"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">é‚£ä¹ˆé‚£ç§è§£å†³æ–¹æ¡ˆæ›´å¿«ï¼Ÿ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ä¸€äº›æ›´æœ‰è¶£çš„äº‹æƒ…"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">ä¸€äº›æ›´æœ‰è¶£çš„äº‹æƒ…</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ€»ç»“"><span class="post-toc-number">1.9.</span> <span class="post-toc-text">æ€»ç»“</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æƒ³è¦äº†è§£æ›´è¿‡å…³äº-Angular-ä¸­-change-detection-çš„ç›¸å…³çŸ¥è¯†ï¼Ÿ"><span class="post-toc-number">1.10.</span> <span class="post-toc-text">æƒ³è¦äº†è§£æ›´è¿‡å…³äº Angular ä¸­ change detection çš„ç›¸å…³çŸ¥è¯†ï¼Ÿ</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-12-14 21:59:55" datetime="2018-12-14T13:59:55.000Z"  itemprop="datePublished">2018-12-14</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Angular/">Angular</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="æ–‡ç« æ€»é˜…è¯»é‡" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="ç¿»è¯‘-OnPush-ç»„ä»¶ä¸­-NgDoCheck-å’Œ-AsyncPipe-çš„åŒºåˆ«"><a href="#ç¿»è¯‘-OnPush-ç»„ä»¶ä¸­-NgDoCheck-å’Œ-AsyncPipe-çš„åŒºåˆ«" class="headerlink" title="[ç¿»è¯‘] OnPush ç»„ä»¶ä¸­ NgDoCheck å’Œ AsyncPipe çš„åŒºåˆ«"></a>[ç¿»è¯‘] OnPush ç»„ä»¶ä¸­ NgDoCheck å’Œ AsyncPipe çš„åŒºåˆ«</h1><blockquote>
<p>åŸæ–‡ï¼š<a href="https://blog.angularindepth.com/the-difference-between-ngdocheck-and-asyncpipe-in-onpush-components-4918ec4b29d4" target="_blank" rel="noopener">The difference between NgDoCheck and AsyncPipe in OnPush components</a><br>ä½œè€…ï¼š<strong><a href="http://twitter.com/maxim_koretskyi" target="_blank" rel="noopener">Max Koretskyi</a></strong><br>åŸæŠ€æœ¯åšæ–‡ç”± <code>Max Koretskyi</code> æ’°å†™å‘å¸ƒï¼Œä»–ç›®å‰äº <a href="https://angular-grid.ag-grid.com/?utm_source=medium&amp;utm_medium=blog&amp;utm_campaign=angularcustom" target="_blank" rel="noopener">ag-Grid</a> æ‹…ä»»å¼€å‘è€…èŒä½</p>
</blockquote>
<blockquote>
<p>è¯‘è€…ï¼š<strong><a href="https://github.com/TanYiBing" target="_blank" rel="noopener">Ice Panpan</a></strong></p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/rxjs/1.jpeg" alt="async or ngdocheck" title="">
                </div>
                <div class="image-caption">async or ngdocheck</div>
            </figure>
<p>è¿™ç¯‡æ–‡ç« æ˜¯å¯¹<a href="https://twitter.com/shai_reznik/status/1054868497363283968" target="_blank" rel="noopener">Shaiè¿™æ¡æ¨ç‰¹</a>çš„å›åº”ã€‚ä»–è¯¢é—®ä½¿ç”¨ <code>NgDoCheck</code> ç”Ÿå‘½å‘¨æœŸé’©å­æ¥æ‰‹åŠ¨æ¯”è¾ƒå€¼è€Œä¸æ˜¯ä½¿ç”¨ <code>asyncPipe</code> æ˜¯å¦æœ‰æ„ä¹‰ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼Œéœ€è¦å¯¹å¼•æ“çš„å·¥ä½œåŸç†æœ‰å¾ˆå¤šäº†è§£ï¼šå˜åŒ–æ£€æµ‹(change detection)ï¼Œç®¡é“(pipe)å’Œç”Ÿå‘½å‘¨æœŸé’©å­(lifecycle hooks)ã€‚é‚£å°±æ˜¯æˆ‘æ¢ç´¢çš„å…¥å£ğŸ˜ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•æ‰‹åŠ¨å¤„ç†å˜æ›´æ£€æµ‹ã€‚è¿™äº›æŠ€æœ¯ä½¿æ‚¨å¯ä»¥æ›´å¥½åœ°æŒæ§ Angular çš„è¾“å…¥ç»‘å®š(input bindings)çš„è‡ªåŠ¨æ‰§è¡Œå’Œå¼‚æ­¥å€¼æ£€æŸ¥(async values checks)ã€‚æŒæ¡äº†è¿™äº›çŸ¥è¯†ä¹‹åï¼Œæˆ‘è¿˜å°†ä¸æ‚¨åˆ†äº«æˆ‘å¯¹è¿™äº›è§£å†³æ–¹æ¡ˆçš„æ€§èƒ½å½±å“çš„çœ‹æ³•ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<h2 id="OnPush-ç»„ä»¶"><a href="#OnPush-ç»„ä»¶" class="headerlink" title="OnPush ç»„ä»¶"></a>OnPush ç»„ä»¶</h2><p>åœ¨ Angular ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ç§éå¸¸å¸¸è§çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œéœ€è¦å°† <code>ChangeDetectionStrategy.OnPush</code> æ·»åŠ åˆ°ç»„ä»¶ä¸­ã€‚å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹ä¸¤ä¸ªç®€å•çš„ç»„ä»¶ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'a-comp'</span>,</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;span&gt;I am A component&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;b-comp&gt;&lt;/b-comp&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AComponent &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'b-comp'</span>,</span><br><span class="line">    template: <span class="string">`&lt;span&gt;I am B component&lt;/span&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> BComponent &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·è®¾ç½®ä¹‹åï¼Œ Angular æ¯æ¬¡éƒ½ä¼šå¯¹ <code>A</code> å’Œ <code>B</code> ä¸¤ä¸ªç»„ä»¶è¿è¡Œå˜æ›´æ£€æµ‹ã€‚å¦‚æœæˆ‘ä»¬ç°åœ¨ä¸º <code>B</code> ç»„ä»¶æ·»åŠ ä¸Š <code>OnPush</code> ç­–ç•¥ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'b-comp'</span>,</span><br><span class="line">    template: <span class="string">`&lt;span&gt;I am B component&lt;/span&gt;`</span>,</span><br><span class="line">    changeDetection: ChangeDetectionStrategy.OnPush</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> BComponent &#123;&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åªæœ‰åœ¨è¾“å…¥ç»‘å®šçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶</strong> Angular æ‰ä¼šå¯¹ <code>B</code> è¿è¡Œå˜æ›´æ£€æµ‹ã€‚ç”±äºå®ƒç°åœ¨æ²¡æœ‰ä»»ä½•ç»‘å®šï¼Œå› æ­¤è¯¥ç»„ä»¶åªä¼šåœ¨åˆå§‹åŒ–çš„æ—¶å€™æ£€æŸ¥ä¸€æ¬¡ã€‚</p>
<h2 id="æ‰‹åŠ¨è§¦å‘å˜æ›´æ£€æµ‹"><a href="#æ‰‹åŠ¨è§¦å‘å˜æ›´æ£€æµ‹" class="headerlink" title="æ‰‹åŠ¨è§¦å‘å˜æ›´æ£€æµ‹"></a>æ‰‹åŠ¨è§¦å‘å˜æ›´æ£€æµ‹</h2><p>æœ‰æ²¡æœ‰åŠæ³•å¼ºåˆ¶å¯¹ <code>B</code> ç»„ä»¶è¿›è¡Œå˜æ›´æ£€æµ‹ï¼Ÿæ˜¯çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨å…¥ <code>changeDetectorRef</code> å¹¶ä½¿ç”¨å®ƒçš„æ–¹æ³• <code>markForCheck</code> æ¥æŒ‡ç¤º Angular éœ€è¦æ£€æŸ¥è¯¥ç»„ä»¶ã€‚å¹¶ä¸”ç”±äº <a href="https://blog.angularindepth.com/if-you-think-ngdocheck-means-your-component-is-being-checked-read-this-article-36ce63a3f3e5" target="_blank" rel="noopener"><em>NgDoCheck é’©å­ä»ç„¶ä¼šè¢« B ç»„ä»¶è§¦å‘</em></a>ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥åœ¨ <em>NgDoCheck</em> ä¸­è°ƒç”¨ <em>markForCheck</em>ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'b-comp'</span>,</span><br><span class="line">    template: <span class="string">`&lt;span&gt;I am B component&lt;/span&gt;`</span>,</span><br><span class="line">    changeDetection: ChangeDetectionStrategy.OnPush</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> BComponent &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> cd: ChangeDetectorRef</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    ngDoCheck() &#123;</span><br><span class="line">        <span class="keyword">this</span>.cd.markForCheck();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œå½“ Angular æ£€æŸ¥çˆ¶ç»„ä»¶ <code>A</code> æ—¶ï¼Œå°†å§‹ç»ˆæ£€æŸ¥ <code>B</code> ç»„ä»¶ã€‚ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬å¯ä»¥åœ¨å“ªé‡Œä½¿ç”¨å®ƒã€‚</p>
<h2 id="è¾“å…¥ç»‘å®š"><a href="#è¾“å…¥ç»‘å®š" class="headerlink" title="è¾“å…¥ç»‘å®š"></a>è¾“å…¥ç»‘å®š</h2><p>æˆ‘ä¹‹å‰è¯´è¿‡ï¼ŒAngular åªåœ¨ <code>OnPush</code> ç»„ä»¶çš„ç»‘å®šå‘ç”Ÿå˜åŒ–æ—¶è¿è¡Œçš„å˜åŒ–æ£€æµ‹ã€‚æ‰€ä»¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¾“å…¥ç»‘å®šçš„ä¾‹å­ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªé€šè¿‡è¾“å…¥ç»‘å®šä»çˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥çš„å¯¹è±¡ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'b-comp'</span>,</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;span&gt;I am B component&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;User name: &#123;&#123;user.name&#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    changeDetection: ChangeDetectionStrategy.OnPush</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> BComponent &#123;</span><br><span class="line">    <span class="meta">@Input</span>() user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨çˆ¶ç»„ä»¶ <code>A</code> ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å®ç°äº†åœ¨å•å‡»æŒ‰é’®æ—¶æ¥æ›´æ–°å¯¹è±¡åç§°çš„  <em>changeName</em>  æ–¹æ³•ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'a-comp'</span>,</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;span&gt;I am A component&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;button (click)="changeName()"&gt;Trigger change detection&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;b-comp [user]="user"&gt;&lt;/b-comp&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AComponent &#123;</span><br><span class="line">    user = &#123;name: <span class="string">'A'</span>&#125;;</span><br><span class="line"></span><br><span class="line">    changeName() &#123;</span><br><span class="line">        <span class="keyword">this</span>.user.name = <span class="string">'B'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‚¨ç°åœ¨<a href="https://stackblitz.com/edit/angular-kq26qe" target="_blank" rel="noopener">è¿è¡Œæ­¤ç¤ºä¾‹</a>ï¼Œåˆ™åœ¨ç¬¬ä¸€æ¬¡å˜æ›´æ£€æµ‹åï¼Œæ‚¨å°†çœ‹åˆ°ç”¨æˆ·åç§°è¢«æ‰“å°å‡ºæ¥ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User name: A</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®å¹¶å›è°ƒä¸­æ›´æ”¹åç§°æ—¶ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">changeName() &#123;</span><br><span class="line">    <span class="keyword">this</span>.user.name = <span class="string">'B'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¯¥åç§°å¹¶æ²¡æœ‰åœ¨å±å¹•ä¸Šæ›´æ–°</strong>ï¼Œè¿™æ˜¯å› ä¸º Angular å¯¹è¾“å…¥å‚æ•°æ‰§è¡Œæµ…æ¯”è¾ƒï¼Œå¹¶ä¸”å¯¹ user å¯¹è±¡çš„å¼•ç”¨æ²¡æœ‰æ”¹å˜ã€‚é‚£æˆ‘ä»¬æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<p>å¥½å§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ£€æµ‹åˆ°å·®å¼‚æ—¶æ‰‹åŠ¨æ£€æŸ¥åç§°å¹¶è§¦å‘å˜æ›´æ£€æµ‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'b-comp'</span>,</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;span&gt;I am B component&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;User name: &#123;&#123;user.name&#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    changeDetection: ChangeDetectionStrategy.OnPush</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> BComponent &#123;</span><br><span class="line">    <span class="meta">@Input</span>() user;</span><br><span class="line">    previousName = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> cd: ChangeDetectorRef</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    ngDoCheck() &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.previousName !== <span class="keyword">this</span>.user.name) &#123;</span><br><span class="line">            <span class="keyword">this</span>.previousName = <span class="keyword">this</span>.user.name;</span><br><span class="line">            <span class="keyword">this</span>.cd.markForCheck();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‚¨ç°åœ¨<a href="https://stackblitz.com/edit/angular-8dkwct" target="_blank" rel="noopener">è¿è¡Œæ­¤ä»£ç </a>ï¼Œä½ å°†åœ¨å±å¹•ä¸Šçœ‹åˆ°æ›´æ–°çš„åç§°ã€‚</p>
<h2 id="å¼‚æ­¥æ›´æ–°"><a href="#å¼‚æ­¥æ›´æ–°" class="headerlink" title="å¼‚æ­¥æ›´æ–°"></a>å¼‚æ­¥æ›´æ–°</h2><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çš„ä¾‹å­æ›´å¤æ‚ä¸€ç‚¹ã€‚æˆ‘ä»¬å°†ä»‹ç»ä¸€ç§åŸºäº RxJs çš„æœåŠ¡ï¼Œå®ƒå¯ä»¥å¼‚æ­¥å‘å‡ºæ›´æ–°ã€‚è¿™ç±»ä¼¼äº NgRx çš„ä½“ç³»ç»“æ„ã€‚æˆ‘å°†ä½¿ç”¨ä¸€ä¸ª <code>BehaviorSubject</code> ä½œä¸ºå€¼çš„æ¥æºï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªæµçš„æœ€å¼€å§‹è®¾ç½®åˆå§‹å€¼ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'a-comp'</span>,</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;span&gt;I am A component&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;button (click)="changeName()"&gt;Trigger change detection&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;b-comp [user]="user"&gt;&lt;/b-comp&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AComponent &#123;</span><br><span class="line">    stream = <span class="keyword">new</span> BehaviorSubject(&#123;name: <span class="string">'A'</span>&#125;);</span><br><span class="line">    user = <span class="keyword">this</span>.stream.asObservable();</span><br><span class="line"></span><br><span class="line">    changeName() &#123;</span><br><span class="line">        <span class="keyword">this</span>.stream.next(&#123;name: <span class="string">'B'</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å­ç»„ä»¶ä¸­è®¢é˜…è¿™ä¸ªæµå¹¶ä»ä¸­è·å–åˆ° <code>user</code> å¯¹è±¡ã€‚æˆ‘ä»¬éœ€è¦è®¢é˜…æµå¹¶æ£€æŸ¥å€¼æ˜¯å¦æ›´æ–°ã€‚è¿™æ ·åšçš„å¸¸ç”¨æ–¹æ³•æ˜¯ä½¿ç”¨ <a href="https://angular.io/api/common/AsyncPipe" target="_blank" rel="noopener">AsyncPipe</a>ã€‚</p>
<h2 id="AsyncPipe"><a href="#AsyncPipe" class="headerlink" title="AsyncPipe"></a>AsyncPipe</h2><p>æ‰€ä»¥è¿™é‡Œæ˜¯å­ç»„ä»¶ <code>B</code> çš„å®ç°ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'b-comp'</span>,</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;span&gt;I am B component&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;User name: &#123;&#123;(user | async).name&#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    changeDetection: ChangeDetectionStrategy.OnPush</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> BComponent &#123;</span><br><span class="line">    <span class="meta">@Input</span>() user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://stackblitz.com/edit/angular-q8n3qj" target="_blank" rel="noopener">è¿™æ˜¯æ¼”ç¤º</a>ã€‚ä½†æ˜¯ï¼Œè¿˜æœ‰å¦ä¸€ç§ä¸ä½¿ç”¨ç®¡é“çš„æ–¹æ³•å—ï¼Ÿ</p>
<h2 id="æ‰‹åŠ¨æ£€æŸ¥å¹¶ä¸”å˜æ›´æ£€æµ‹"><a href="#æ‰‹åŠ¨æ£€æŸ¥å¹¶ä¸”å˜æ›´æ£€æµ‹" class="headerlink" title="æ‰‹åŠ¨æ£€æŸ¥å¹¶ä¸”å˜æ›´æ£€æµ‹"></a>æ‰‹åŠ¨æ£€æŸ¥å¹¶ä¸”å˜æ›´æ£€æµ‹</h2><p>æ˜¯çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ£€æŸ¥å€¼å¹¶åœ¨éœ€è¦æ—¶è§¦å‘å˜æ›´æ£€æµ‹ã€‚æ­£å¦‚å¼€å¤´çš„ä¾‹å­ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>NgDoCheck</code> ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'b-comp'</span>,</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;span&gt;I am B component&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;User name: &#123;&#123;user.name&#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    changeDetection: ChangeDetectionStrategy.OnPush</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> BComponent &#123;</span><br><span class="line">    <span class="meta">@Input</span>(<span class="string">'user'</span>) user$;</span><br><span class="line">    user;</span><br><span class="line">    previousName = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> cd: ChangeDetectorRef</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    ngOnInit() &#123;</span><br><span class="line">        <span class="keyword">this</span>.user$.subscribe(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.user = user;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ngDoCheck() &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.previousName !== <span class="keyword">this</span>.user.name) &#123;</span><br><span class="line">            <span class="keyword">this</span>.previousName = <span class="keyword">this</span>.user.name;</span><br><span class="line">            <span class="keyword">this</span>.cd.markForCheck();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥<a href="https://stackblitz.com/edit/angular-4xuug1" target="_blank" rel="noopener">åœ¨è¿™æŸ¥çœ‹</a>ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›æŠŠå€¼çš„æ¯”è¾ƒä¸æ›´æ–°é€»è¾‘ä» <code>NgDoCheck</code> ä¸­ç§»è‡³è®¢é˜…çš„å›è°ƒå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä»é‚£é‡Œè·å–åˆ°æ–°å€¼çš„ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> BComponent &#123;</span><br><span class="line">    <span class="meta">@Input</span>(<span class="string">'user'</span>) user$;</span><br><span class="line">    user = &#123;name: <span class="literal">null</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> cd: ChangeDetectorRef</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    ngOnInit() &#123;</span><br><span class="line">        <span class="keyword">this</span>.user$.subscribe(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.user.name !== user.name) &#123;</span><br><span class="line">                <span class="keyword">this</span>.cd.markForCheck();</span><br><span class="line">                <span class="keyword">this</span>.user = user;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://stackblitz.com/edit/angular-lvtfve" target="_blank" rel="noopener">ä¾‹å­åœ¨è¿™</a>ã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼Œè¿™å…¶å®æ­£æ˜¯ <a href="https://github.com/maximusk/angular/blob/725bae1921cfcdcf5a5b0c35252c632198d1a7a4/packages/common/src/pipes/async_pipe.ts#L139" target="_blank" rel="noopener">AsyncPipe èƒŒåçš„å·¥ä½œåŸç†</a>ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pipe</span>(&#123;name: <span class="string">'async'</span>, pure: <span class="literal">false</span>&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AsyncPipe <span class="keyword">implements</span> OnDestroy, PipeTransform &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> _ref: ChangeDetectorRef</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  transform(obj: ...): <span class="built_in">any</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">this</span>._subscribe(obj);</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>._latestValue === <span class="keyword">this</span>._latestReturnedValue) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>._latestReturnedValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._latestReturnedValue = <span class="keyword">this</span>._latestValue;</span><br><span class="line">    <span class="keyword">return</span> WrappedValue.wrap(<span class="keyword">this</span>._latestValue);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> _subscribe(obj): <span class="built_in">void</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">this</span>._strategy.createSubscription(</span><br><span class="line">        obj, <span class="function">(<span class="params">value: <span class="built_in">Object</span></span>) =&gt;</span> <span class="keyword">this</span>._updateLatestValue(obj, value));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> _updateLatestValue(<span class="keyword">async</span>: <span class="built_in">any</span>, value: <span class="built_in">Object</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">async</span> === <span class="keyword">this</span>._obj) &#123;</span><br><span class="line">      <span class="keyword">this</span>._latestValue = value;</span><br><span class="line">      <span class="keyword">this</span>._ref.markForCheck();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é‚£ä¹ˆé‚£ç§è§£å†³æ–¹æ¡ˆæ›´å¿«ï¼Ÿ"><a href="#é‚£ä¹ˆé‚£ç§è§£å†³æ–¹æ¡ˆæ›´å¿«ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆé‚£ç§è§£å†³æ–¹æ¡ˆæ›´å¿«ï¼Ÿ"></a>é‚£ä¹ˆé‚£ç§è§£å†³æ–¹æ¡ˆæ›´å¿«ï¼Ÿ</h2><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“å¦‚ä½•ä½¿ç”¨æ‰‹åŠ¨è¿›è¡Œå˜æ›´æ£€æµ‹è€Œä¸æ˜¯ä½¿ç”¨ AsyncPipeï¼Œè®©æˆ‘ä»¬å›ç­”ä¸‹æœ€ä¸€å¼€å§‹çš„é—®é¢˜ã€‚é‚£ç§æ–¹æ³•æ›´å¿«ï¼Ÿ</p>
<p>å—¯â€¦è¿™å–å†³äºä½ å¦‚ä½•æ¯”è¾ƒå®ƒä»¬ï¼Œä½†åœ¨å…¶ä»–æ¡ä»¶ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ‰‹åŠ¨æ–¹æ³•ä¼šæ›´å¿«ã€‚å°½ç®¡æˆ‘ä¸è®¤ä¸ºä¸¤è€…ä¼šæœ‰æ˜æ˜¾åŒºåˆ«ã€‚ä»¥ä¸‹æ˜¯ä¸ºä»€ä¹ˆæ‰‹åŠ¨æ–¹æ³•å¯ä»¥æ›´å¿«çš„å‡ ä¸ªä¾‹å­ã€‚</p>
<p>å°±å†…å­˜è€Œè¨€ï¼Œæ‚¨ä¸éœ€è¦åˆ›å»º Pipe ç±»çš„å®ä¾‹ã€‚å°±ç¼–è¯‘æ—¶é—´è€Œè¨€ï¼Œç¼–è¯‘å™¨ä¸å¿…èŠ±æ—¶é—´è§£æç®¡é“ç‰¹å®šè¯­æ³•å¹¶ç”Ÿæˆç®¡é“ç‰¹å®šè¾“å‡ºã€‚å°±è¿è¡Œæ—¶é—´è€Œè¨€ï¼ŒèŠ‚çœäº†å¼‚æ­¥ç®¡é“ä¸ºç»„ä»¶è¿›è¡Œå˜æ›´æ£€æµ‹æ‰€è°ƒç”¨çš„å‡½æ•°çš„æ—¶é—´ã€‚è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†å½“ä»£ç ä¸­åŒ…å« pipe æ—¶ <a href="https://blog.angularindepth.com/the-mechanics-of-dom-updates-in-angular-3b2970d5c03d" target="_blank" rel="noopener">updateRenderer</a> æ‰€ç”Ÿæˆçš„ä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">_ck, _v</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _co = _v.component;</span><br><span class="line">    <span class="keyword">var</span> currVal_0 = jit_unwrapValue_7(_v, <span class="number">3</span>, <span class="number">0</span>, asyncpipe.transform(_co.user)).name;</span><br><span class="line">    _ck(_v, <span class="number">3</span>, <span class="number">0</span>, currVal_0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æ‚¨æ‰€è§ï¼Œå¼‚æ­¥ç®¡é“çš„ä»£ç è°ƒç”¨ç®¡é“å®ä¾‹ä¸Šçš„ <code>transform</code> æ–¹æ³•ä»¥è·å–æ–°å€¼ã€‚ç®¡é“å°†è¿”å›ä»è®¢é˜…ä¸­æ”¶åˆ°çš„æœ€æ–°å€¼ã€‚</p>
<p>å°†å…¶ä¸ä¸ºæ‰‹åŠ¨æ–¹æ³•ç”Ÿæˆçš„æ™®é€šä»£ç è¿›è¡Œæ¯”è¾ƒï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">_ck,_v</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _co = _v.component;</span><br><span class="line">    <span class="keyword">var</span> currVal_0 = _co.user.name;</span><br><span class="line">    _ck(_v,<span class="number">3</span>,<span class="number">0</span>,currVal_0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯ Angular åœ¨æ£€æŸ¥ <code>B</code> ç»„ä»¶æ—¶è°ƒç”¨çš„æ–¹æ³•ã€‚</p>
<h2 id="ä¸€äº›æ›´æœ‰è¶£çš„äº‹æƒ…"><a href="#ä¸€äº›æ›´æœ‰è¶£çš„äº‹æƒ…" class="headerlink" title="ä¸€äº›æ›´æœ‰è¶£çš„äº‹æƒ…"></a>ä¸€äº›æ›´æœ‰è¶£çš„äº‹æƒ…</h2><p>ä¸æ‰§è¡Œæµ…æ¯”è¾ƒçš„è¾“å…¥ç»‘å®šä¸åŒï¼Œ<strong>å¼‚æ­¥ç®¡é“çš„å®ç°æ ¹æœ¬ä¸æ‰§è¡Œæ¯”è¾ƒ</strong>ï¼ˆæ„Ÿè°¢ <a href="https://medium.com/@sharlatenok" target="_blank" rel="noopener">Olena Horal</a> æ³¨æ„åˆ°è¿™ä¸€ç‚¹ï¼‰ã€‚å®ƒå°†æ¯ä¸ªæ–°å‘å°„çš„å€¼è®¤ä¸ºæ˜¯æ›´æ–°ï¼Œå³ä½¿å®ƒä¸å…ˆå‰å‘å°„çš„å€¼ä¸€æ ·ã€‚ä¸‹é¢çš„ä»£ç æ˜¯çˆ¶ç»„ä»¶ <code>A</code> çš„å®ç°ï¼Œå®ƒæ¯æ¬¡éƒ½å‘å°„å‡ºç›¸åŒçš„å¯¹è±¡ã€‚å°½ç®¡å¦‚æ­¤ï¼ŒAngular ä»ç„¶ä¼šå¯¹ <code>B</code> ç»„ä»¶è¿›è¡Œå˜æ›´æ£€æµ‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AComponent &#123;</span><br><span class="line">    o = &#123;name: <span class="string">'A'</span>&#125;;</span><br><span class="line">    user = <span class="keyword">new</span> BehaviorSubject(<span class="keyword">this</span>.o);</span><br><span class="line"></span><br><span class="line">    changeName() &#123;</span><br><span class="line">        <span class="keyword">this</span>.user.next(<span class="keyword">this</span>.o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ„å‘³ç€æ¯æ¬¡å‘å‡ºæ–°å€¼æ—¶ï¼Œä½¿ç”¨å¼‚æ­¥ç®¡é“çš„ç»„ä»¶éƒ½ä¼šè¢«æ ‡è®°ä»¥è¿›è¡Œæ£€æŸ¥ã€‚å¹¶ä¸” Angular å°†åœ¨ä¸‹æ¬¡è¿è¡Œå˜æ›´æ£€æµ‹æ—¶æ£€æŸ¥è¯¥ç»„ä»¶ï¼Œå³ä½¿è¯¥å€¼æœªæ›´æ”¹ã€‚</p>
<p>è¿™æ˜¯åº”ç”¨äºä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿå—¯â€¦åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªå…³æ³¨ <code>user</code> å¯¹è±¡çš„ <code>name</code> å±æ€§ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å®ƒã€‚æˆ‘ä»¬å¹¶ä¸å…³å¿ƒæ•´ä¸ªå¯¹è±¡ä»¥åŠå¯¹è±¡çš„å¼•ç”¨å¯èƒ½ä¼šæ”¹å˜çš„äº‹å®ã€‚å¦‚æœ name æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬ä¸éœ€è¦é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚ä½†ä½ æ— æ³•ç”¨å¼‚æ­¥ç®¡é“æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p>
<p><code>NgDoCheck</code> å¹¶ä¸æ˜¯æ²¡æœ‰é—®é¢˜:)ç”±äºä»…åœ¨æ£€æŸ¥çˆ¶ç»„ä»¶æ—¶è§¦å‘é’©å­ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªçˆ¶ç»„ä»¶ä½¿ç”¨ <code>OnPush</code> ç­–ç•¥å¹¶ä¸”åœ¨å˜æ›´æ£€æµ‹æœŸé—´æœªæ£€æŸ¥ï¼Œåˆ™ä¸ä¼šè§¦å‘è¯¥é’©å­ã€‚å› æ­¤ï¼Œå½“æ‚¨é€šè¿‡æœåŠ¡æ”¶åˆ°æ–°å€¼æ—¶ï¼Œä¸èƒ½ä¾èµ–å®ƒæ¥è§¦å‘å˜æ›´æ£€æµ‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘åœ¨è®¢é˜…å›è°ƒä¸­è°ƒç”¨ <code>markForCheck</code> æ–¹æ³•æ˜¯æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åŸºæœ¬ä¸Šï¼Œæ‰‹åŠ¨æ¯”è¾ƒå¯ä»¥è®©æ‚¨æ›´å¥½åœ°æ§åˆ¶æ£€æŸ¥ã€‚æ‚¨å¯ä»¥å®šä¹‰ä½•æ—¶éœ€è¦æ£€æŸ¥ç»„ä»¶ã€‚è¿™ä¸è®¸å¤šå…¶ä»–å·¥å…·ç›¸åŒ - æ‰‹åŠ¨æ§åˆ¶ä¸ºæ‚¨æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œä½†æ‚¨å¿…é¡»çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆã€‚ä¸ºäº†è·å¾—è¿™äº›çŸ¥è¯†ï¼Œæˆ‘é¼“åŠ±æ‚¨æŠ•å…¥æ—¶é—´å’Œç²¾åŠ›å­¦ä¹ å’Œé˜…è¯»<a href="https://blog.angularindepth.com/level-up-your-reverse-engineering-skills-8f910ae10630" target="_blank" rel="noopener">æ›´å¤šæ–‡ç« </a>ã€‚</p>
<p>ä½ ä¸ç”¨æ‹…å¿ƒ <code>NgDoCheck</code> ç”Ÿå‘½å‘¨æœŸé’©å­è¢«è°ƒç”¨çš„é¢‘ç‡ï¼Œæˆ–è€…å®ƒä¼šæ¯”ç®¡é“çš„ <code>transform</code> æ–¹æ³•æ›´é¢‘ç¹åœ°è¢«è°ƒç”¨ã€‚é¦–å…ˆï¼Œæˆ‘ä¸Šé¢å·²ç»å±•ç¤ºäº†è§£å†³æ–¹æ¡ˆï¼Œå½“ä½¿ç”¨å¼‚æ­¥æµæ—¶ï¼Œä½ åº”è¯¥åœ¨è®¢é˜…çš„å›è°ƒä¸­è€Œéåœ¨è¯¥é’©å­å‡½æ•°ä¸­æ‰‹åŠ¨æ‰§è¡Œå˜æ›´æ£€æµ‹ã€‚å…¶æ¬¡ï¼Œåªæœ‰åœ¨çˆ¶ç»„ä»¶è¢«æ£€æµ‹åæ‰ä¼šè°ƒç”¨è¯¥é’©å­å‡½æ•°ã€‚å¦‚æœçˆ¶ç»„ä»¶æ²¡æœ‰è¢«æ£€æŸ¥ï¼Œåˆ™ä¸ä¼šè°ƒç”¨è¯¥é’©å­ã€‚å¯¹äºç®¡é“è€Œè¨€ï¼Œç”±äºæµä¸­çš„æµ…æ¯”è¾ƒå’Œæ›´æ”¹å¼•ç”¨çš„åŸå› ï¼Œç®¡é“çš„ <code>transform</code> æ–¹æ³•è¢«è°ƒç”¨çš„æ¬¡æ•°åªä¼šå’Œæ‰‹åŠ¨æ–¹æ³•ç›¸åŒç”šè‡³æ›´å¤šã€‚</p>
<h2 id="æƒ³è¦äº†è§£æ›´è¿‡å…³äº-Angular-ä¸­-change-detection-çš„ç›¸å…³çŸ¥è¯†ï¼Ÿ"><a href="#æƒ³è¦äº†è§£æ›´è¿‡å…³äº-Angular-ä¸­-change-detection-çš„ç›¸å…³çŸ¥è¯†ï¼Ÿ" class="headerlink" title="æƒ³è¦äº†è§£æ›´è¿‡å…³äº Angular ä¸­ change detection çš„ç›¸å…³çŸ¥è¯†ï¼Ÿ"></a>æƒ³è¦äº†è§£æ›´è¿‡å…³äº Angular ä¸­ change detection çš„ç›¸å…³çŸ¥è¯†ï¼Ÿ</h2><p>ä»è¿™5ç¯‡æ–‡ç« å…¥æ‰‹ä¼šè®©ä½ æˆä¸º Angular å˜æ›´æ£€æµ‹æœºåˆ¶çš„ä¸“å®¶ã€‚å¦‚æœä½ æƒ³è¦ç‰¢å›ºæŒæ¡ Angular ä¸­å˜æ›´æ£€æµ‹æœºåˆ¶ï¼Œé‚£ä¹ˆè¿™ä¸€ç³»åˆ—çš„æ–‡ç« æ˜¯å¿…è¯»çš„ã€‚æ¯ä¸€ç¯‡æ–‡ç« éƒ½ä¼šåŸºäºå‰ä¸€ç¯‡æ–‡ç« ä¸­æ‰€è§£é‡Šçš„ç›¸å…³ä¿¡æ¯ï¼Œæ—¢åŒ…å«é«˜å±‚æ¬¡çš„æ¦‚è¿°åˆå›Šæ‹¬äº†å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œå¹¶ä¸”éƒ½é™„æœ‰ç›¸å…³æºä»£ç ã€‚</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2018-12-14T14:02:36.941Z" itemprop="dateUpdated">2018-12-14 22:02:36</time>
</span><br>


        
        é™¤ç‰¹åˆ«è¯´æ˜å¤–ï¼Œæ–‡ç« å‡é‡‡ç”¨ã€ŒçŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 åè®®ã€è¿›è¡Œè®¸å¯ï¼Œè½¬è½½éœ€æ³¨æ˜æ–‡ç« å‡ºå¤„ï¼š<a href="/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/" target="_blank" rel="external">http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/</a>
        
    </div>
    
    <footer>
        <a href="http://tanyibing.com">
            <img src="/img/avatar.jpg" alt="Ice Panpan(Tan Yibing)">
            Ice Panpan(Tan Yibing)
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">èµ</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular/">Angular</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/&title=ã€Š[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«ã€‹ â€” Ice Panpan's blog&pic=http://tanyibing.com/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/&title=ã€Š[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«ã€‹ â€” Ice Panpan's blog&source=I'm TanYiBing,my email is 820567197@qq.com&tanyibing1995@gmail.com,my qq is 8..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«ã€‹ â€” Ice Panpan's blog&url=http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/&via=http://tanyibing.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/11/25/Rxjsï¼ˆäºŒï¼‰ï¼šæ—¥å¿—è®°å½•/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">ã€ç¿»è¯‘ã€‘è°ƒè¯•Rxjsï¼ˆäºŒï¼‰ï¼šæ—¥å¿—è®°å½•</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "4rdRChJgomStDCzm3AqViMI2-gzGzoHsz",
            appKey: "4cekfBC0l7ePUjMgoIGow6DC",
            avatar: "mm",
            placeholder: "è¦ä¸è¦è¯´ç‚¹ä»€ä¹ˆï¼Ÿ",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->







</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        è°¢è°¢å¤§çˆ·~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        ç«™ç‚¹æ€»è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        ç«™ç‚¹æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>åšå®¢å†…å®¹éµå¾ª <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Ice Panpan(Tan Yibing) &copy; 2017 - 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/&title=ã€Š[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«ã€‹ â€” Ice Panpan's blog&pic=http://tanyibing.com/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/&title=ã€Š[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«ã€‹ â€” Ice Panpan's blog&source=I'm TanYiBing,my email is 820567197@qq.com&tanyibing1995@gmail.com,my qq is 8..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š[ç¿»è¯‘]OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«ã€‹ â€” Ice Panpan's blog&url=http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/&via=http://tanyibing.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://tanyibing.com/2018/12/14/ç¿»è¯‘-OnPushç»„ä»¶ä¸­NgDoCheckå’ŒAsyncPipeçš„åŒºåˆ«/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADLElEQVR42u3ay27iUBAE0Pz/TzPbWQRT1U0kfDleRTxsjpFS9OPnJz4e/x3PHnn2ruQ8169/9uz14284sLGxsW/CflweM2QOSM6cnCG3YGNjY5/KbhnXsdRGTnKbki+jCDlsbGxs7DKcrq+ShF9+I7CxsbGx31VaXAdbHlrtu7CxsbG/k500lZJ3JbzkI84Kmz/ppWFjY2N/PDufin7+338y38bGxsb+YPajPNpYauOwHQk/Rgc2Njb2Sew8ADZtoCQU8+tu1n2wsbGxz2MnAdO2bNoW1Z6UrwH95LmKjY2NfRP2LK4264+b8iZfBhqOB7CxsbGPYG9+6LdD3NkN2qwTYWNjY5/NzhtAs+FrHkKbZlO9oIONjY19KDsvLd47+s3XLt9WJmFjY2Mfx27b8bM1mrxo2ZRA0ReDjY2NfXP2rCm/KWzaKw57Y9fNKWxsbOzj2O2pNy37vK2/b2k9vRY2Njb2cewE0C7c5Oubq+Z+GZzY2NjY57HzS+b49pwvyoYynIqAxMbGxj6CPcPMNmGS4mQ2GMhLIGxsbOzz2LOf8nlBkt+4dlQ8C05sbGzs89j7hv6mlb8ZJOcDhqftJGxsbOyj2W/Y5SyLjXwwMBsGD1d2sLGxsW/CThoxm1fOInCz0POiTMLGxsY+mt0WEm0gzYbB7QDgxZeBjY2NfSh7Xza0bfrrmNmMgV98WmxsbOyD2PlP/H38tIPbWaTl58HGxsY+g50HSR4SswIjHwBvhsFPSxFsbGzs27L3xcbsDLPzzII2WtzBxsbGvjl7T2oLks2yzqyAqfMNGxsb+1bsvISY3awktGbHrDjBxsbG/jb2LDbyD7cvToarRdjY2NhfwN4UG2350ZYxw9BqZxrY2NjYH8/er9Tsh7JtMdOOpX95HBsbG/sg9nv/57djhv1oob3Rw5kJNjY29sezN5jZWDcPs7awKQIMGxsb+zh2GwyzNn3b0G+bUEX4YWNjY2Ovmzj5rUxaSMmI95dSBBsbG/uL2UnAtIHUFiqzRhg2Njb2qex3DVNnc4l3tY2S0MXGxsY+j50PetsQur5wPkhor5K3q7CxsbFvzv4HOGzEcGiN59AAAAAASUVORK5CYII=" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'æ­»é¬¼å»å“ªé‡Œäº†ï¼';
            clearTimeout(titleTime);
        } else {
            document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
